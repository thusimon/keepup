(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(t,e,a){t.exports=a(123)},110:function(t,e,a){},111:function(t,e,a){},117:function(t,e,a){},118:function(t,e,a){},119:function(t,e,a){},121:function(t,e,a){},122:function(t,e,a){},123:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),r=a(61),l=a.n(r),i=a(10),s=(a(110),a(2)),o=function(){var t=new Intl.DateTimeFormat("en-us",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"}),e=Object(n.useState)(new Date(Date.now())),a=Object(s.a)(e,2),r=a[0],l=a[1];return Object(n.useEffect)((function(){setInterval((function(){l(new Date(Date.now()))}),1e3)}),[]),c.a.createElement("div",{className:"clock"},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},c.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),c.a.createElement("path",{d:"M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})),c.a.createElement("span",null,t.format(r)))},u=(a(111),function(){return c.a.createElement("header",{className:"page-header"},c.a.createElement("nav",null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(i.b,{to:"/signup"},"Sign Up")),c.a.createElement("li",{className:"nav-seperator"}),c.a.createElement("li",null,c.a.createElement(i.b,{to:"/statistics"},"Statistics")))),c.a.createElement("span",null,c.a.createElement(o,null)))}),m=a(1),d=864e5,f=function(){var t=new Date(Date.now());return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()},h=function(t,e){var a=f();if(e>0){var n=a-d*e;return t.map((function(t){var c=t.sign_up.filter((function(t){return t>=n}));return t.data=c.length/e,t.range=[n,a],t.name=t.title,t}))}return t.map((function(t){var e=t.createdAt,n=Math.floor((a-e)/d);return n=n>0?n:1,t.data=t.sign_up.length/n,t.range=[e,a],t.name=t.title,t}))},p=(a(117),function(t){t.userId;var e=t.taskId,a=t.taskTitle,r=t.signUps,l=Object(n.useState)({disable:!0,clz:"new-task",msg:""}),i=Object(s.a)(l,2),o=i[0],u=i[1];Object(n.useEffect)((function(){var t,e=r.length>0?r[r.length-1]:null,a=parseInt(e),n=function(t){if(isNaN(t))return{clz:"new-task",msg:"New Task"};var e=Date.now()-t;if(e<6e4)return{clz:"today",msg:"Just now"};if(e<36e5)return{clz:"today",msg:"".concat(Math.floor(e/6e4)," mins ago")};if(e<72e5)return{clz:"today",msg:"1 hour ago"};if(e<d)return{clz:"today",msg:"".concat(Math.floor(e/36e5)," hours ago")};var a=Math.floor(e/d);return 1===a?{clz:"days-ago-1",msg:"1 day ago"}:a<=2?{clz:"days-ago-2",msg:"".concat(a," days ago")}:a<=7?{clz:"days-ago-7",msg:"".concat(a," days ago")}:{clz:"days-ago-30",msg:"".concat(a," days ago")}}(a),c=(t=a,!isNaN(t)&&t>f());u(c?{disable:!0,clz:n.clz,msg:n.msg}:{disable:!1,clz:n.clz,msg:n.msg})}),[e,r]);return c.a.createElement("div",{className:"task-card"},c.a.createElement("div",{className:"task-info ".concat(o.clz)},c.a.createElement("div",{className:"task-title"},a),c.a.createElement("div",{className:"task-last-signed"},"Last signed at: ".concat(o.msg))),c.a.createElement("div",{className:"task-sign"},c.a.createElement("button",{onClick:function(){var t=new FormData,a=Date.now();t.append("task_id",e),t.append("time_stamp",a),fetch("/api/tasks",{method:"PATCH",body:t}).then((function(t){return t.json()})).then((function(){u({disable:!0,clz:"today",msg:"Just now"})}))},disabled:o.disable,title:o.disable?"Already signed up, come tomorrow":"Sign up today!"},"Sign Up!")))}),g=(a(118),function(){return c.a.createElement("div",{className:"loading"},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M990,515.8c-1.3-66-15.6-131.9-42.1-192.1c-26.4-60.3-64.7-114.8-111.7-159.9c-47-45.1-102.7-80.8-163-104.4c-60.3-23.6-125-34.9-189.1-33.6c-64,1.3-127.8,15.2-186,40.9c-58.3,25.6-111.2,62.7-154.8,108.2c-43.7,45.5-78.2,99.5-100.9,157.8c-22.8,58.3-33.7,121-32.3,183c1.3,62,14.8,123.6,39.6,180c24.8,56.4,60.7,107.5,104.8,149.7c44.1,42.2,96.3,75.6,152.7,97.5c56.4,22,117,32.5,177,31.1c60-1.3,119.5-14.4,173.9-38.4c54.5-24,103.8-58.8,144.6-101.4c40.8-42.6,72.9-93.1,94.1-147.6c12.9-33,21.6-67.6,26.2-102.5c1.2,0.1,2.5,0.1,3.7,0.1c34.9,0,63.2-28.3,63.2-63.2c0-1.8-0.1-3.5-0.2-5.3L990,515.8L990,515.8z M889.5,683.7c-23.2,52.6-56.8,100.2-98,139.5c-41.2,39.3-89.9,70.3-142.5,90.7c-52.6,20.4-108.9,30.1-164.8,28.7c-55.9-1.3-111.2-13.6-161.8-36c-50.6-22.4-96.5-54.8-134.3-94.5c-37.9-39.7-67.7-86.7-87.2-137.4C81.2,623.9,72,569.7,73.3,515.8c1.3-53.9,13.2-107.1,34.8-155.8c21.6-48.7,52.8-92.8,91.1-129.2c38.3-36.4,83.5-65.1,132.2-83.8c48.7-18.8,100.9-27.7,152.7-26.3c51.9,1.3,103,12.8,149.7,33.6c46.8,20.8,89.2,50.9,124.1,87.7c35,36.8,62.4,80.3,80.4,127.1c18,46.8,26.5,96.9,25.1,146.7h0.2c-0.1,1.7-0.2,3.5-0.2,5.3c0,32.6,24.7,59.4,56.4,62.8C913.8,618.3,903.6,651.9,889.5,683.7L889.5,683.7z"})))))}),v=(a(59),function(t){var e=t.addTask;return c.a.createElement("div",{className:"empty-tasks"},c.a.createElement("div",{className:"message"},c.a.createElement("span",null,"Click"),c.a.createElement("span",{className:"add-task-btn",onClick:function(){e()}},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},c.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),c.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}))),c.a.createElement("span",null,"to create a daily task")))}),E=(a(119),function(t){var e=t.userId,a=t.closeModel,r=Object(n.useRef)(null);return c.a.createElement("div",{className:"create-task"},c.a.createElement("div",{className:"task-name"},c.a.createElement("label",null,"Task Name"),c.a.createElement("input",{ref:r,placeholder:"Briefly name your task here"})),c.a.createElement("div",{className:"task-btns"},c.a.createElement("button",{className:"secondary",onClick:function(){a(!1)}},"Cancel"),c.a.createElement("button",{className:"primary",onClick:function(){var t=r.current.value;if(t){var n=new FormData;n.append("user",e),n.append("title",t),fetch("/api/tasks",{method:"POST",body:n}).then((function(t){return t.json()})).then((function(){a(!0)}))}else alert("Please provide brief task title")}},"Create")))}),w=(a(60),function(t){var e=t.userName,a=t.userId,r=Object(n.useState)([]),l=Object(s.a)(r,2),i=l[0],o=l[1],u=Object(n.useState)(0),m=Object(s.a)(u,2),d=m[0],f=m[1],h=function(t){fetch("/api/tasks?userId=".concat(t)).then((function(t){return t.json()})).then((function(t){o(t),f(1)}))};Object(n.useEffect)((function(){h(a)}),[a]);var w=function(){f(2)},b=function(){f(0),h(a)};return c.a.createElement("div",{className:"user-tasks"},c.a.createElement("div",{className:"name-badge"},c.a.createElement("span",{className:"profile"},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},c.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),c.a.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})),c.a.createElement("span",null,e)),c.a.createElement("span",{className:"add-task-btn",onClick:w},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},c.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),c.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"})))),c.a.createElement("div",{className:"tasks"},0===d?c.a.createElement(g,null):1===d?i&&i.length>0?i.map((function(t){return c.a.createElement(p,{key:t._id,userId:a,taskId:t._id,taskTitle:t.title,signUps:t.sign_up})})):c.a.createElement(v,{addTask:w}):c.a.createElement(E,{userId:a,closeModel:b})))}),b=function(){var t=Object(n.useState)([]),e=Object(s.a)(t,2),a=e[0],r=e[1];return Object(n.useEffect)((function(){fetch("/api/users").then((function(t){return t.json()})).then((function(t){t.sort((function(t,e){return t.sort-e.sort})),r(t)}))}),[]),c.a.createElement("div",null,a.map((function(t){return c.a.createElement(w,{key:t._id,userName:t.name,userId:t._id})})))},y=function(){return c.a.createElement("div",{className:"empty-tasks"},c.a.createElement("div",{className:"message"},c.a.createElement("span",null,"No task chart avaliable")))},k=a(9),N=function(t,e,a){var n=t.map((function(t){return t.name})),c=e.width,r=e.height,l=e.margin,i=c-l.left-l.right,s=r-l.top-l.bottom,o=k.c().domain(n).range([0,i]).paddingInner(.5).paddingOuter(.5),u=k.d().domain([0,1]).range([s,0]),m=a.transition().duration(500),d=k.a(o),f=k.b(u).ticks(5).tickFormat((function(t){return"".concat((100*t).toFixed(0),"%")}));a.selectAll("g.y-axis").call(f).selectAll("text").attr("text-anchor","end"),a.selectAll("g.x-axis").call(d).selectAll("text").attr("text-anchor","middle");var h=k.e;a.selectAll("g.chart-area").selectAll("text").data(t,(function(t){return t})).join((function(t){t.append("text").text((function(t){return"".concat((100*t.data).toFixed(2),"%")})).attr("text-anchor","middle").attr("fill","#000000").attr("fill-opacity",0).attr("x",(function(t){return o(t.name)+o.bandwidth()/2})).attr("y",s).call((function(t){return t.transition(m).attr("y",(function(t){return u(t.data)-10})).attr("fill-opacity",1)}))}),(function(t){t.text((function(t){return"".concat((100*t.data).toFixed(2),"%")})).attr("text-anchor","middle").attr("fill","#000000").attr("fill-opacity",0).attr("x",(function(t){return o(t.name)+o.bandwidth()/2})).attr("y",s).call((function(t){return t.transition(m).attr("y",(function(t){return u(t.data)-10})).attr("fill-opacity",1)}))}),(function(t){t.call((function(t){return t.transition(m).attr("fill-opacity",0).attr("y",s).remove()}))})),a.selectAll("g.chart-area").selectAll("rect").data(t,(function(t){return t})).join((function(t){t.append("rect").attr("fill",(function(t,e){return h[e]})).attr("x",(function(t){return o(t.name)})).attr("y",s).attr("width",o.bandwidth()).attr("height",0).attr("fill-opacity",0).call((function(t){return t.transition(m).attr("y",(function(t){return u(t.data)})).attr("height",(function(t){return s-u(t.data)})).attr("fill-opacity",1)}))}),(function(t){t.attr("fill",(function(t,e){return h[e]})).attr("x",(function(t){return o(t.name)})).attr("y",s).attr("width",o.bandwidth()).attr("height",0).attr("fill-opacity",0).call((function(t){return t.transition(m).attr("y",(function(t){return u(t.data)})).attr("height",(function(t){return s-u(t.data)})).attr("fill-opacity",1)}))}),(function(t){t.call((function(t){return t.transition(m).attr("fill-opacity",0).attr("height",0).remove()}))}))},x=(a(121),function(t){var e=t.taskList,a=t.userId,r="chart-area-".concat(a),l=Object(n.useState)({}),i=Object(s.a)(l,2),o=i[0],u=i[1],m=Object(n.useState)(null),d=Object(s.a)(m,2),f=d[0],p=d[1],g=Object(n.useRef)(null);Object(n.useEffect)((function(){var t=g.current;h(e,7);var a={containerId:"#".concat(r),width:t.clientWidth,height:t.clientHeight,margin:{left:40,right:40,top:40,bottom:40}};u(a);var n=function(t,e){var a=t.containerId,n=t.width,c=t.height,r=t.margin,l=k.f(a).append("svg").attr("width",n).attr("height",c),i=c-r.top-r.bottom;return l.append("g").attr("transform","translate(".concat(r.left,", ").concat(r.top,")")).attr("class","chart-area"),l.append("g").attr("class","x-axis").attr("transform","translate(".concat(r.left,", ").concat(r.top+i,")")),l.append("g").attr("class","y-axis").attr("transform","translate(".concat(r.left,", ").concat(r.top,")")),N(e,t,l),l}(a,e);p(n)}),[]);return c.a.createElement("div",{className:"task-chart",ref:g},c.a.createElement("div",{className:"chart-option"},c.a.createElement("select",{onChange:function(t){var a=parseInt(t.target.value);h(e,a),N(e,o,f)}},c.a.createElement("option",{value:"7",selected:!0},"Last 7 days"),c.a.createElement("option",{value:"30"},"Last 30 days"),c.a.createElement("option",{value:"120"},"Last 120 days"),c.a.createElement("option",{value:"365"},"Last 365 days"),c.a.createElement("option",{value:"-1"},"All"))),c.a.createElement("div",{id:r}))}),j=function(t){var e=t.userName,a=t.userId,r=Object(n.useState)([]),l=Object(s.a)(r,2),i=l[0],o=l[1],u=Object(n.useState)(0),m=Object(s.a)(u,2),d=m[0],f=m[1];Object(n.useEffect)((function(){!function(t){fetch("/api/tasks?userId=".concat(t)).then((function(t){return t.json()})).then((function(t){o(t),f(1)}))}(a)}),[a]);return c.a.createElement("div",{className:"user-tasks"},c.a.createElement("div",{className:"name-badge"},c.a.createElement("span",{className:"profile"},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},c.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),c.a.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})),c.a.createElement("span",null,e))),c.a.createElement("div",{className:"tasks"},0===d?c.a.createElement(g,null):i&&i.length>0?c.a.createElement(x,{taskList:i,userId:a}):c.a.createElement(y,null)))},z=function(){var t=Object(n.useState)([]),e=Object(s.a)(t,2),a=e[0],r=e[1];return Object(n.useEffect)((function(){fetch("/api/users").then((function(t){return t.json()})).then((function(t){t.sort((function(t,e){return t.sort-e.sort})),r(t)}))}),[]),c.a.createElement("div",null,a.map((function(t){return c.a.createElement(j,{key:t._id,userName:t.name,userId:t._id})})))},O=function(){return c.a.createElement("main",null,c.a.createElement(m.c,null,c.a.createElement(m.a,{exact:!0,path:"/",component:b}),c.a.createElement(m.a,{path:"/signup",component:b}),c.a.createElement(m.a,{path:"/statistics",component:z})))},M=(a(122),function(){return c.a.createElement("div",{className:"App"},c.a.createElement(u,null),c.a.createElement(O,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i.a,null,c.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},59:function(t,e,a){},60:function(t,e,a){}},[[105,1,2]]]);
//# sourceMappingURL=main.f1135a6a.chunk.js.map