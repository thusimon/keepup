(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{27:function(e,t,a){},28:function(e,t,a){},42:function(e,t,a){e.exports=a(59)},47:function(e,t,a){},48:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(29),l=a.n(r),s=a(9),i=(a(47),a(3)),o=function(){var e=new Intl.DateTimeFormat("en-us",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"}),t=Object(n.useState)(new Date(Date.now())),a=Object(i.a)(t,2),r=a[0],l=a[1];return Object(n.useEffect)((function(){setInterval((function(){l(new Date(Date.now()))}),1e3)}),[]),c.a.createElement("div",{className:"clock"},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},c.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),c.a.createElement("path",{d:"M22 5.72l-4.6-3.86-1.29 1.53 4.6 3.86L22 5.72zM7.88 3.39L6.6 1.86 2 5.71l1.29 1.53 4.59-3.85zM12.5 8H11v6l4.75 2.85.75-1.23-4-2.37V8zM12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9c4.97 0 9-4.03 9-9s-4.03-9-9-9zm0 16c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})),c.a.createElement("span",null,e.format(r)))},u=(a(48),function(){return c.a.createElement("header",{className:"page-header"},c.a.createElement("nav",null,c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(s.b,{to:"/signup"},"Sign Up")),c.a.createElement("li",{className:"nav-seperator"}),c.a.createElement("li",null,c.a.createElement(s.b,{to:"/statistics"},"Statistics")))),c.a.createElement("span",null,c.a.createElement(o,null)))}),m=a(1),d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],f=function(){var e=new Date(Date.now());return new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()},h=function(e){var t=function(){for(var e=new Date(Date.now()),t=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-864e5*e.getDay(),a=[],n=0;n<7;n++)a.push(t+864e5*n);return a}(),a=f();return e.map((function(e){return e.weekView=function(e,t,a,n){return a.map((function(a,c){return{weekDayView:function(e,t){return t.filter((function(t){return t>=e&&t<=e+864e5})).length>0}(a,t)?1:a<=n?0:-1,weekDay:a,dayName:d[c],title:e}}))}(e.title,e.sign_up,t,a),e}))},p=(a(54),function(e){e.userId;var t=e.taskId,a=e.taskTitle,r=e.signUps,l=Object(n.useState)({disable:!0,clz:"new-task",msg:""}),s=Object(i.a)(l,2),o=s[0],u=s[1];Object(n.useEffect)((function(){var e,t=r.length>0?r[r.length-1]:null,a=parseInt(t),n=function(e){if(isNaN(e))return{clz:"new-task",msg:"New Task"};var t=Date.now()-e;if(t<6e4)return{clz:"today",msg:"Just now"};if(t<36e5)return{clz:"today",msg:"".concat(Math.floor(t/6e4)," mins ago")};if(t<72e5)return{clz:"today",msg:"1 hour ago"};if(t<864e5)return{clz:"today",msg:"".concat(Math.floor(t/36e5)," hours ago")};var a=Math.floor(t/864e5);return 1===a?{clz:"days-ago-1",msg:"1 day ago"}:a<=2?{clz:"days-ago-2",msg:"".concat(a," days ago")}:a<=7?{clz:"days-ago-7",msg:"".concat(a," days ago")}:{clz:"days-ago-30",msg:"".concat(a," days ago")}}(a),c=(e=a,!isNaN(e)&&e>f());u(c?{disable:!0,clz:n.clz,msg:n.msg}:{disable:!1,clz:n.clz,msg:n.msg})}),[t,r]);return c.a.createElement("div",{className:"task-card"},c.a.createElement("div",{className:"task-info ".concat(o.clz)},c.a.createElement("div",{className:"task-title"},a),c.a.createElement("div",{className:"task-last-signed"},"Last signed at: ".concat(o.msg))),c.a.createElement("div",{className:"task-sign"},c.a.createElement("button",{onClick:function(){var e=new FormData,a=Date.now();e.append("task_id",t),e.append("time_stamp",a),fetch("/api/tasks",{method:"PATCH",body:e}).then((function(e){return e.json()})).then((function(){u({disable:!0,clz:"today",msg:"Just now"})}))},disabled:o.disable,title:o.disable?"Already signed up, come tomorrow":"Sign up today!"},"Sign Up!")))}),g=(a(55),function(){return c.a.createElement("div",{className:"loading"},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 1000 1000"},c.a.createElement("g",null,c.a.createElement("g",null,c.a.createElement("path",{d:"M990,515.8c-1.3-66-15.6-131.9-42.1-192.1c-26.4-60.3-64.7-114.8-111.7-159.9c-47-45.1-102.7-80.8-163-104.4c-60.3-23.6-125-34.9-189.1-33.6c-64,1.3-127.8,15.2-186,40.9c-58.3,25.6-111.2,62.7-154.8,108.2c-43.7,45.5-78.2,99.5-100.9,157.8c-22.8,58.3-33.7,121-32.3,183c1.3,62,14.8,123.6,39.6,180c24.8,56.4,60.7,107.5,104.8,149.7c44.1,42.2,96.3,75.6,152.7,97.5c56.4,22,117,32.5,177,31.1c60-1.3,119.5-14.4,173.9-38.4c54.5-24,103.8-58.8,144.6-101.4c40.8-42.6,72.9-93.1,94.1-147.6c12.9-33,21.6-67.6,26.2-102.5c1.2,0.1,2.5,0.1,3.7,0.1c34.9,0,63.2-28.3,63.2-63.2c0-1.8-0.1-3.5-0.2-5.3L990,515.8L990,515.8z M889.5,683.7c-23.2,52.6-56.8,100.2-98,139.5c-41.2,39.3-89.9,70.3-142.5,90.7c-52.6,20.4-108.9,30.1-164.8,28.7c-55.9-1.3-111.2-13.6-161.8-36c-50.6-22.4-96.5-54.8-134.3-94.5c-37.9-39.7-67.7-86.7-87.2-137.4C81.2,623.9,72,569.7,73.3,515.8c1.3-53.9,13.2-107.1,34.8-155.8c21.6-48.7,52.8-92.8,91.1-129.2c38.3-36.4,83.5-65.1,132.2-83.8c48.7-18.8,100.9-27.7,152.7-26.3c51.9,1.3,103,12.8,149.7,33.6c46.8,20.8,89.2,50.9,124.1,87.7c35,36.8,62.4,80.3,80.4,127.1c18,46.8,26.5,96.9,25.1,146.7h0.2c-0.1,1.7-0.2,3.5-0.2,5.3c0,32.6,24.7,59.4,56.4,62.8C913.8,618.3,903.6,651.9,889.5,683.7L889.5,683.7z"})))))}),v=(a(27),function(e){var t=e.addTask;return c.a.createElement("div",{className:"empty-tasks"},c.a.createElement("div",{className:"message"},c.a.createElement("span",null,"Click"),c.a.createElement("span",{className:"add-task-btn",onClick:function(){t()}},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},c.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),c.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}))),c.a.createElement("span",null,"to create a daily task")))}),E=(a(56),function(e){var t=e.userId,a=e.closeModel,r=Object(n.useRef)(null);return c.a.createElement("div",{className:"create-task"},c.a.createElement("div",{className:"task-name"},c.a.createElement("label",null,"Task Name"),c.a.createElement("input",{ref:r,placeholder:"Briefly name your task here"})),c.a.createElement("div",{className:"task-btns"},c.a.createElement("button",{className:"secondary",onClick:function(){a(!1)}},"Cancel"),c.a.createElement("button",{className:"primary",onClick:function(){var e=r.current.value;if(e){var n=new FormData;n.append("user",t),n.append("title",e),fetch("/api/tasks",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(){a(!0)}))}else alert("Please provide brief task title")}},"Create")))}),w=(a(28),function(e){var t=e.userName,a=e.userId,r=Object(n.useState)([]),l=Object(i.a)(r,2),s=l[0],o=l[1],u=Object(n.useState)(0),m=Object(i.a)(u,2),d=m[0],f=m[1],h=function(e){fetch("/api/tasks?userId=".concat(e)).then((function(e){return e.json()})).then((function(e){o(e),f(1)}))};Object(n.useEffect)((function(){h(a)}),[a]);var w=function(){f(2)},k=function(){f(0),h(a)};return c.a.createElement("div",{className:"user-tasks"},c.a.createElement("div",{className:"name-badge"},c.a.createElement("span",{className:"profile"},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},c.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),c.a.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})),c.a.createElement("span",null,t)),c.a.createElement("span",{className:"add-task-btn",onClick:w},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},c.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),c.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"})))),c.a.createElement("div",{className:"tasks"},0===d?c.a.createElement(g,null):1===d?s&&s.length>0?s.map((function(e){return c.a.createElement(p,{key:e._id,userId:a,taskId:e._id,taskTitle:e.title,signUps:e.sign_up})})):c.a.createElement(v,{addTask:w}):c.a.createElement(E,{userId:a,closeModel:k})))}),k=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){fetch("/api/users").then((function(e){return e.json()})).then((function(e){e.sort((function(e,t){return e.sort-t.sort})),r(e)}))}),[]),c.a.createElement("div",null,a.map((function(e){return c.a.createElement(w,{key:e._id,userName:e.name,userId:e._id})})))},b=function(){return c.a.createElement("div",{className:"empty-tasks"},c.a.createElement("div",{className:"message"},c.a.createElement("span",null,"No task chart avaliable")))},y=a(10),N=(a(57),function(e){var t=e.taskList,a=e.userId,r="chart-area-".concat(a),l=100,s=0,i=0,o=40,u=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=u.current,a=e.clientWidth,n=e.clientHeight,c=a-l-s,m=n-i-o;h(t),function(e,t,a,n){console.log(12,t);var c=t[0].weekView,r=t.map((function(e){return e.title})),l=y.c().domain(c.map((function(e){return e.dayName}))).range([0,a]).paddingInner(.3).paddingOuter(.3),s=y.c().domain(r).range([0,n]).paddingInner(.3).paddingOuter(.3),i=y.a(l),o=y.b(s);e.append("g").attr("class","x-axis").attr("transform","translate(0, ".concat(n,")")).call(i).selectAll("text").attr("y","10").attr("x","-5").attr("text-anchor","end").attr("transform","rotate(-40)"),e.append("g").attr("class","y-axis").call(o).selectAll("text").attr("y","0").attr("x","-100").attr("text-anchor","end").attr("transform","rotate(-40)"),e.selectAll(".series").data(t).enter().append("g").attr("class","series").selectAll(".point").data((function(e){return e.weekView})).enter().append("circle").attr("class","point").attr("r",5).attr("cx",(function(e){return l(e.dayName)})).attr("cy",(function(e){return s(e.title)})).attr("fill",(function(e){return 0===e.weekDayView?"#FF0000":1===e.weekDayView?"#00FF00":"#999999"}))}(y.d("#".concat(r)).append("svg").attr("width",a).attr("height",n).append("g").attr("transform","translate(".concat(l,", ").concat(i,")")),t,c,m)}),[]),c.a.createElement("div",{className:"task-chart",ref:u},c.a.createElement("div",{id:r}))}),z=function(e){var t=e.userName,a=e.userId,r=Object(n.useState)([]),l=Object(i.a)(r,2),s=l[0],o=l[1],u=Object(n.useState)(0),m=Object(i.a)(u,2),d=m[0],f=m[1];Object(n.useEffect)((function(){!function(e){fetch("/api/tasks?userId=".concat(e)).then((function(e){return e.json()})).then((function(e){o(e),f(1)}))}(a)}),[a]);return c.a.createElement("div",{className:"user-tasks"},c.a.createElement("div",{className:"name-badge"},c.a.createElement("span",{className:"profile"},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},c.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),c.a.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})),c.a.createElement("span",null,t))),c.a.createElement("div",{className:"tasks"},0===d?c.a.createElement(g,null):s&&s.length>0?c.a.createElement(N,{taskList:s,userId:a}):c.a.createElement(b,null)))},j=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){fetch("/api/users").then((function(e){return e.json()})).then((function(e){e.sort((function(e,t){return e.sort-t.sort})),r(e)}))}),[]),c.a.createElement("div",null,a.map((function(e){return c.a.createElement(z,{key:e._id,userName:e.name,userId:e._id})})))},O=function(){return c.a.createElement("main",null,c.a.createElement(m.c,null,c.a.createElement(m.a,{exact:!0,path:"/",component:k}),c.a.createElement(m.a,{path:"/signup",component:k}),c.a.createElement(m.a,{path:"/statistics",component:j})))},x=(a(58),function(){return c.a.createElement("div",{className:"App"},c.a.createElement(u,null),c.a.createElement(O,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(s.a,null,c.a.createElement(x,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[42,1,2]]]);
//# sourceMappingURL=main.e5db58d1.chunk.js.map